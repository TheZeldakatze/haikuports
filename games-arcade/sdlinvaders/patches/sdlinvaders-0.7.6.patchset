From fbe17a7a031bfc9ce9efd6c4d0fdcbc81c329232 Mon Sep 17 00:00:00 2001
From: Victor Gamper <victor@wenzeslaus.de>
Date: Sun, 12 Dec 2021 22:33:39 +0100
Subject: switch the workdir to the data directory


diff --git a/main.c b/main.c
index f4f650b..0928de6 100644
--- a/main.c
+++ b/main.c
@@ -24,6 +24,7 @@
 #include "music.h"
 
 #define TICKS  30
+#define HIGHSCORE_FILE "/boot/system/settings/sdlinvaders/highscores"
 
 /* The images */
 extern SDL_Surface *screen;
@@ -773,7 +774,7 @@ void save_scores ()
   int i;
   char filename[100];
        
-  sprintf (filename, "data/highscores");
+  sprintf (filename, HIGHSCORE_FILE);
 
   file = fopen(filename, "w");
 
@@ -800,7 +801,7 @@ void show_highscore ()
   int i;
   char filename[100];
        
-  sprintf (filename, "data/highscores");
+  sprintf (filename, HIGHSCORE_FILE);
 
   file = fopen(filename, "r");
 
@@ -831,6 +832,9 @@ void show_highscore ()
 int main(int argc, char *argv[])
 {
   int quit = 0;
+  
+  /* HACK: change the directory to the data directory of Haiku */
+  chdir("/boot/system/data/sdlinvaders/");	
 
   printf("\nSDLInvaders Version %s\n\n",VERSION);
 
-- 
2.30.2

