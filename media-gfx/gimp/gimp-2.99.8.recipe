SUMMARY="The Free & Open Source Image Editor"
DESCRIPTION="GIMP is a cross-platform image editor available for GNU/Linux, \
macOS, Windows and more operating systems.

Whether you are a graphic designer, photographer, illustrator, or scientist, \
GIMP provides you with sophisticated tools to get your job done. You can \
further enhance your productivity with GIMP thanks to many customization \
options and 3rd party plugins."
HOMEPAGE="https://www.gimp.org/"
COPYRIGHT="1995-2021 Spencer Kimball, Peter Mattis, and the GIMP Development Team"
LICENSE="GNU GPL v3"
REVISION="1"
SOURCE_URI="https://download.gimp.org/mirror/pub/gimp/v2.99/gimp-$portVersion.tar.bz2"
CHECKSUM_SHA256="dd916bd3474ef2efc652a0510280977ab8ea95e3d95d918394b0662261c32aae"

# not working: missing many dependencies
ARCHITECTURES="?all !x86_gcc2"
SECONDARY_ARCHITECTURES="?x86"

PROVIDES="
	gimp$secondaryArchSuffix = $portVersion
	app:gimp$secondaryArchSuffix = $portVersion
	"
REQUIRES="
	haiku$secondaryArchSuffix
	gobject_introspection$secondaryArchSuffix
	lib:libgtk_3$secondaryArchSuffix
	lib:libglib_networking_2.0$secondaryArchSuffix
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	gobject_introspection${secondaryArchSuffix}_devel
	lib:libglib_networking_2.0$secondaryArchSuffix
	devel:libgtk_3$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	cmd:intltoolize
	cmd:awk
	cmd:g++$secondaryArchSuffix
	cmd:make
	cmd:pkg_config$secondaryArchSuffix
	cmd:python3
	"

BUILD()
{
	runConfigure ./configure \
		--with-vala=no

	make $jobArgs
}

INSTALL()
{
	make install
	addAppDeskbarSymlink $binDir/gimp
}
